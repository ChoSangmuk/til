# Inflearn (김영한) / 스프링 핵심 원리 - 기본편

- [Inflearn Lecture Dashboard](https://www.inflearn.com/course/%EC%8A%A4%ED%94%84%EB%A7%81-%ED%95%B5%EC%8B%AC-%EC%9B%90%EB%A6%AC-%EA%B8%B0%EB%B3%B8%ED%8E%B8/dashboard)
- 해당 강의는 유료로 저자의 저작권 보호를 위해 강의 자료 미첨부

## 섹션 1. 객체 지향 설계와 스프링
### 이야기 - 자바 진영의 추운 겨울과 스프링의 탄생
- 자바 진영의 겨울
  - 자바 진영의 표준 기술인 EJB
  - 컨테이너, 설정에 의한 트랜잭션, 분산 처리 등 고급 기술이 편하게 지원됨
  - 낮은 수준의 엔티티 빈 지원(쿼리 없이 DB에 객체를 저장하는 기술)
  - EJB에 의존적이고 코드 자체가 지저분해짐, 또한 비싸고 어렵고 느렸음
- 스프링과 JPA의 탄생
  - 간단한 객체를 사용하자는 의도에서 POJO라는 개념이 등장
  - 로드 존슨 저서의 3만줄 가량의 소스가 EJB 컨테이너 대체하며 스프링이 됨
  - 개빈 킹이 EJB 엔티티 빈 기술을 대체하는 Hibernate를 발표하면서 JPA 표준이 새롭게 정의됨

### 스프링이란?
- **스프링은 여러 기술의 모음**이며 스프링 프레임워크가 가장 중요
  - 핵심 기술 : 스프링 DI 컨테이너, AOP, 이벤트, 기타
  - 웹, 데이터 접근 기술 : 스프링 MVC, 스프링 WebFlux, 트랜잭션, JDBC, ORM 지원, XML 지원
- 스프링은 문맥에 따라 다르게 해석될 수 있음
  - 스프링 DI 컨테이너 기술 혹은 스프링 프레임워크 
  - 스프링 부트, 스프링 프레임워크 등을 모두 포함한 스프링 생태계
- **스프링 부트**는 스프링 프레임워크를 편리하게 사용할 수 있도록 지원, 최근에는 기본으로 사용 
  - 단독으로 실행할 수 있는 스프링 애플리케이션을 쉽게 생성 
  - Tomcat 같은 웹 서버를 내장해서 별도의 웹 서버를 설치하지 않아도 됨 
  - 손쉬운 빌드 구성을 위한 starter 종속성 제공 등등 ... 
- 스프링을 왜 만들어 졌고, 핵심 컨셉은 무엇?
  - 단순 스프링의 API 사용법을 익히는 것이 아니라 핵심 컨셉을 이해하는 것이 중요
  - 스프링은 **자바(객체 지향) 언어 기반의 프레임워크**로 객체 지향 언어가 가진 강력한 특징을 살려내는 프레임워크

### 좋은 객체 지향 프로그래밍이란?
- 세상을 역할과 구현으로 구분하면 ...
  - 사용자는 구현 대상 자체를 변경해도 영향을 받지 않음으로 변화에 유연하며, 변경 자체도 편리
  - 사용자는 대상의 역할만 알면 구현 대상의 내부 구조가 변경되어도 영향을 받지 않음
  - 역할에 수정이 발생하는 경우 모든 구현체를 수정해야하는 문제가 발생함으로 역할을 안정적으로 잘 설계하는 것이 가장 중요
- 세상의 역할과 구현이라는 편리한 컨셉을 자바 언어의 다형성을 통해 객체 세상으로 가져올 수 있음
  - 역할 : 인터페이스 
  - 구현 : 인터페이스를 구현한 클래스, 구현 객체 
  - 객체를 설계할 때 역할과 구현을 명확히 분리하고 실행 시점에 구현체를 유연하게 변경
  - 객체 설계 시 역할(인터페이스)을 먼저 부여하고, 그 역할을 수행하는 구현 객체 만들기
  - 클라이언트를 변경하지 않고, 서버의 구현 기능을 유연하게 변경할 수 있음
- 스프링의 제어의 역전(IoC), 의존관계 주입(DI)은 다형성을 활용해서 역할과 구현을 편리하게 다룰 수 있도록 지원 

### **좋은 객체 지향 설계의 5가지 원칙(SOLID)**
- **SRP: 단일 책임 원칙(single responsibility principle)**
  - **한 클래스는 하나의 책임만**
  - 중요한 기준은 변경, 변경이 있을 때 파급 효과가 적으면 단일 책임 원칙을 잘 따른 것
- **OCP: 개방-폐쇄 원칙 (Open/closed principle)**
  - 소프트웨어 요소는 **확장에는 열려 있으나 변경에는 닫혀 있어야 한다**
  - 객체를 생성하고, 연관관계를 맺어주는 별도의 조립, 설정자가 필요 -> 스프링 DI 컨테이너의 역할
```java
public class MemberService {
/*
    private MemberRepository memberRepository = new MemoryMemberRepository();
    구현체를 변경하려면 클라이언트의 변경이 필수적임
    분명 다형성을 사용했지만 OCP 원칙을 지킬 수 없음
*/
    private MemberRepository memberRepository = new JdbcMemberRepository();
}
```
- **LSP: 리스코프 치환 원칙 (Liskov substitution principle)**
  - 다형성에서 하위 클래스는 인터페이스 규약을 지켜야 함
  - 다형성을 지원하기 위한 원칙으로 **인터페이스 구현체의 신뢰성을 보장**
- **ISP: 인터페이스 분리 원칙 (Interface segregation principle)**
  - 특정 클라이언트를 위한 인터페이스 여러 개가 범용 인터페이스 하나보다 좋음
- **DIP: 의존관계 역전 원칙 (Dependency inversion principle)**
  - **추상화(인터페이스)에 의존해야지, 구체화(구현 클래스)에 의존하면 안된다.**
  - 클라이언트가 구현체에 의존하게 되면 변경이 아주 어려워짐
  - OCP에서 설명한 MemberService는 인터페이스에 의존하지만, 구현 클래스도 동시에 의존 ->  DIP 위반
- **다형성 만으로는 OCP, DIP를 지키기 힘듬**

### 객체 지향 설계와 스프링
- 스프링은 다음 기술로 다형성 + OCP, DIP를 가능하게 지원
  - DI(Dependency Injection): 의존관계, 의존성 주입
  - DI 컨테이너 제공
- 클라이언트 코드의 변경 없이 기능 확장

## 섹션 2. 스프링 핵심 원리 이해1 - 예제 만들기
### 프로젝트 생성
### 비즈니스 요구사항과 설계
### 회원 도메인 설계
### 회원 도메인 개발
### 회원 도메인 실행과 테스트
### 주문과 할인 도메인 설계
### 주문과 할인 도메인 개발
### 주문과 할인 도메인 실행과 테스트

## 섹션 3. 스프링 핵심 원리 이해2 - 객체 지향 원리 적용
### 새로운 할인 정책 개발
### 새로운 할인 정책 적용과 문제점
### 관심사의 분리
### AppConfig 리팩터링
### 새로운 구조와 할인 정책 적용
### 전체 흐름 정리
### 좋은 객체 지향 설계의 5가지 원칙의 적용
### IoC, DI, 그리고 컨테이너
### 스프링으로 전환하기

## 섹션 4. 스프링 컨테이너와 스프링 빈
### 스프링 컨테이너 생성
### 컨테이너에 등록된 모든 빈 조회
### 스프링 빈 조회 - 기본
### 스프링 빈 조회 - 동일한 타입이 둘 이상
### 스프링 빈 조회 - 상속 관계
### BeanFactory와 ApplicationContext
### 다양한 설정 형식 지원 - 자바 코드, XML
### 스프링 빈 설정 메타 정보 - BeanDefinition

## 섹션 5. 싱글톤 컨테이너
### 웹 애플리케이션과 싱글톤
### 싱글톤 패턴
### 싱글톤 컨테이너
### 싱글톤 방식의 주의점
### @Configuration과 싱글톤
### @Configuration과 바이트코드 조작의 마법

## 섹션 6. 컴포넌트 스캔
### 컴포넌트 스캔과 의존관계 자동 주입 시작하기
### 탐색 위치와 기본 스캔 대상
### 필터
### 중복 등록과 충돌

## 섹션 7. 의존관계 자동 주입
### 다양한 의존관계 주입 방법
### 옵션 처리
### 생성자 주입을 선택해라!
### 롬복과 최신 트랜드
### 조회 빈이 2개 이상 - 문제
### @Autowired 필드 명, @Qualifier, @Primary
### 애노테이션 직접 만들기
### 조회한 빈이 모두 필요할 때, List, Map
### 자동, 수동의 올바른 실무 운영 기준

## 섹션 8. 빈 생명주기 콜백
### 빈 생명주기 콜백 시작
### 인터페이스 InitializingBean, DisposableBean
### 빈 등록 초기화, 소멸 메서드
### 애노테이션 @PostConstruct, @PreDestroy

## 섹션 9. 빈 스코프
### 빈 스코프란?
### 프로토타입 스코프
### 프로토타입 스코프 - 싱글톤 빈과 함께 사용시 문제점
### 프로토타입 스코프 - 싱글톤 빈과 함께 사용시 Provider로 문제 해결
### 웹 스코프
### request 스코프 예제 만들기
### 스코프와 Provider
### 스코프와 프록시

## 섹션 10. 다음으로
### 다음으로